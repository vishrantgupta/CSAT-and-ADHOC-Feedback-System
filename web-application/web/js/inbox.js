var Inbox=function(){var a=$(".emailContent"),b=function(b){var e="inbox_email.html";a.html(""),j(b),$.ajax({type:"GET",cache:!1,url:e,dataType:"html",success:function(c){j(b),a.html(c),App.initUniform()},error:function(){j(b)},async:!1})},c=function(){function a(){var a=["Serif","Sans","Arial","Arial Black","Courier","Courier New","Comic Sans MS","Helvetica","Impact","Lucida Grande","Lucida Sans","Tahoma","Times","Times New Roman","Verdana"],b=$("[title=Font]").siblings(".dropdown-menu");if($.each(a,function(a,c){b.append($('<li><a data-edit="fontName '+c+'" style="font-family:\''+c+"'\">"+c+"</a></li>"))}),$("a[title]").tooltip({container:"body"}),$(".dropdown-menu input").click(function(){return!1}).change(function(){$(this).parent(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).keydown("esc",function(){this.value="",$(this).change()}),$("[data-role=magic-overlay]").each(function(){var a=$(this),b=$(a.data("target"));a.css("opacity",0).css("position","absolute").offset(b.offset()).width(b.outerWidth()).height(b.outerHeight())}),"onwebkitspeechchange"in document.createElement("input")){var c=$("#editor").offset();$("#voiceBtn").css("position","absolute").offset({top:c.top,left:c.left+$("#editor").innerWidth()-35})}else $("#voiceBtn").hide()}function b(a,b){var c="";"unsupported-file-type"===a?c="Unsupported format "+b:console.log("error uploading file",a,b),$('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button><strong>File upload error</strong> '+c+" </div>").prependTo("#alerts")}a(),$("#editor").wysiwyg({fileUploadError:b})},d=function(b){var d="inbox_main.html";a.html(""),j(b),$.ajax({type:"GET",cache:!1,url:d,dataType:"html",success:function(c){j(b),a.html(c),App.initUniform()},error:function(){j(b)},async:!1})},e=function(b){var d="inbox_email_reply.html";a.html(""),j(b),$.ajax({type:"GET",cache:!1,url:d,dataType:"html",success:function(d){j(b),a.html(d),h(),g(),c(),$("#editor").html($("#reply-content").html()),$("#reply-content").hide(),App.initUniform(),$("#editor").focus()},error:function(){j(b)},async:!1})},f=function(b){var d="inbox_compose.html";a.html(""),j(b),$.ajax({type:"GET",cache:!1,url:d,dataType:"html",success:function(d){j(b),a.html(d),c(),g(),$("#editor").focus(),App.initUniform()},error:function(){j(b)},async:!1})},g=function(){$(".emailCompose .address").on("click",".emailCC",function(){h()}),$(".emailCompose .address").on("click",".emailBCC",function(){i()})},h=function(){var a=$(".emailCompose .address .emailCC"),b=$(".emailCompose .inputCC");a.hide(),b.show(),$(".close",b).click(function(){b.hide(),a.show()})},i=function(){var a=$(".emailCompose .address .emailBCC"),b=$(".emailCompose .inputBCC");a.hide(),b.show(),$(".close",b).click(function(){b.hide(),a.show()})},j=function(a){"undefined"!=typeof a&&(a.attr("disabled")?a.attr("disabled",!1):a.attr("disabled",!0))};return{init:function(){$(".emailNav > li.inbox > a").click(function(){d($(this),"inbox")}),$(".email .composeBtn").on("click","a",function(){f($(this))}),$(".email").on("click",".replyBtn",function(){e($(this))}),$(".emailContent").on("click",".viewEmail",function(){b($(this))}),$(".emailCompose .address").on("click",".emailCC",function(){h()}),$(".emailCompose .address").on("click",".emailBCC",function(){i()}),$(".emailNav > li.inbox > a").click()}}}();